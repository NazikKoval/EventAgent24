!function(a){a.fn.numeric=function(b,c){"boolean"==typeof b&&(b={decimal:b}),b=b||{},"undefined"==typeof b.negative&&(b.negative=!0);var d=b.decimal===!1?"":b.decimal||".",e=b.negative===!0;return c="function"==typeof c?c:function(){},this.data("numeric.decimal",d).data("numeric.negative",e).data("numeric.callback",c).keypress(a.fn.numeric.keypress).keyup(a.fn.numeric.keyup).blur(a.fn.numeric.blur)},a.fn.numeric.keypress=function(b){var c=a.data(this,"numeric.decimal"),d=a.data(this,"numeric.negative"),e=b.charCode?b.charCode:b.keyCode?b.keyCode:0;if(13==e&&"input"==this.nodeName.toLowerCase())return!0;if(13==e)return!1;var f=!1;if(b.ctrlKey&&97==e||b.ctrlKey&&65==e)return!0;if(b.ctrlKey&&120==e||b.ctrlKey&&88==e)return!0;if(b.ctrlKey&&99==e||b.ctrlKey&&67==e)return!0;if(b.ctrlKey&&122==e||b.ctrlKey&&90==e)return!0;if(b.ctrlKey&&118==e||b.ctrlKey&&86==e||b.shiftKey&&45==e)return!0;if(e<48||e>57){var g=a(this).val();if(0!==g.indexOf("-")&&d&&45==e&&(0===g.length||0===parseInt(a.fn.getSelectionStart(this),10)))return!0;c&&e==c.charCodeAt(0)&&g.indexOf(c)!=-1&&(f=!1),8!=e&&9!=e&&13!=e&&35!=e&&36!=e&&37!=e&&39!=e&&46!=e?f=!1:"undefined"!=typeof b.charCode&&(b.keyCode==b.which&&0!==b.which?(f=!0,46==b.which&&(f=!1)):0!==b.keyCode&&0===b.charCode&&0===b.which&&(f=!0)),c&&e==c.charCodeAt(0)&&(f=g.indexOf(c)==-1)}else f=!0;return f},a.fn.numeric.keyup=function(b){var c=a(this).val();if(c&&c.length>0){var d=a.fn.getSelectionStart(this),e=a.fn.getSelectionEnd(this),f=a.data(this,"numeric.decimal"),g=a.data(this,"numeric.negative");if(""!==f&&null!==f){var h=c.indexOf(f);0===h&&(this.value="0"+c),1==h&&"-"==c.charAt(0)&&(this.value="-0"+c.substring(1)),c=this.value}for(var i=[0,1,2,3,4,5,6,7,8,9,"-",f],j=c.length,k=j-1;k>=0;k--){var l=c.charAt(k);0!==k&&"-"==l?c=c.substring(0,k)+c.substring(k+1):0!==k||g||"-"!=l||(c=c.substring(1));for(var m=!1,n=0;n<i.length;n++)if(l==i[n]){m=!0;break}m&&" "!=l||(c=c.substring(0,k)+c.substring(k+1))}var o=c.indexOf(f);if(o>0)for(var p=j-1;p>o;p--){var q=c.charAt(p);q==f&&(c=c.substring(0,p)+c.substring(p+1))}this.value=c,a.fn.setSelection(this,[d,e])}},a.fn.numeric.blur=function(){var b=a.data(this,"numeric.decimal"),c=a.data(this,"numeric.callback"),d=this.value;if(""!==d){var e=new RegExp("^\\d+$|^\\d*"+b+"\\d+$");e.exec(d)||c.apply(this)}},a.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",a.fn.numeric.keypress).unbind("blur",a.fn.numeric.blur)},a.fn.getSelectionStart=function(a){if(a.createTextRange){var b=document.selection.createRange().duplicate();return b.moveEnd("character",a.value.length),""===b.text?a.value.length:a.value.lastIndexOf(b.text)}return a.selectionStart},a.fn.getSelectionEnd=function(a){if(a.createTextRange){var b=document.selection.createRange().duplicate();return b.moveStart("character",-a.value.length),b.text.length}return a.selectionEnd},a.fn.setSelection=function(a,b){if("number"==typeof b&&(b=[b,b]),b&&b.constructor==Array&&2==b.length)if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveStart("character",b[0]),c.moveEnd("character",b[1]),c.select()}else a.setSelectionRange&&(a.focus(),a.setSelectionRange(b[0],b[1]))}}(jQuery);